---
title: Cron表达式详解
meta:
  donate: true
categories: [编程学习]
tag: []
abbrlink: de33
date: 2020-06-11 20:14:54
---

任务调度经常会用到 cron 表达式来调度作业任务，本文记录 cron 的写法以及常用的表达式。

<!-- more -->

## 简介
Cron 表达式是一个由 5 或 6 个空格隔开而分为 6 或 7 个域的字符串。每个域对应各自含义，语法格式有如下两种：

+ `Seconds` `Minutes` `Hours` `DayofMonth` `Month` `DayofWeek` `Year`
+ `Seconds` `Minutes` `Hours` `DayofMonth` `Month` `DayofWeek`

## 字段含义

| 字段 | 允许的特殊字符 | 允许值 |
| -- | -- | -- |
| 秒 (Seconds) | , - * / | 0 - 59 整数 |
| 分 (Minutes) | , - * / | 0 - 59 整数 |
| 小时 (Hours) | , - * / | 0 - 23 整数 |
| 日期 (DayofMonth) | , - * / ? L W | 1 - 31 整数 |
| 月份 (Month) | , - * / | 1 - 12 整数 或 JAN - DEC |
| 星期 (DayofWeek) | , - * / ? L # | 1 - 7 整数 或 SUN - SAT |
| 年 (Year) (可选留空) | , - * / | 1970 - 2099 |

## 特殊字符含义
| 字符 | 含义 | 举例 |
| -- | -- | -- |
| * | 表示匹配任意值 | 在分钟域使用 * 表示每分钟都会触发事件 |
| ? | 只在日期和星期域使用表示非明确值 | 月份中的日期和星期中的日期这两个元素在一起互斥时应该通过设置一个问号来表明不想设置那个字段 |
| - | 表示范围 | 在小时域使用 3-5 表示 3点、4点、5点会触发事件  |
| / | 表示起始时间开始触发，之后每隔固定时间触发一次 | 在秒域使用 5/20 表示 5秒、25秒、45秒会触发事件 |
| , | 表示列出枚举值 | 在星期域使用 2,4,6 表示星期一、星期三、星期五会触发事件 |
| L | 只在日期和星期域使用表示最后 | 在星期域使用 5L 表示每月最后一个星期四会触发事件 |
| W | 只在日期域使用表示指定日期的最近工作日 | 在日期域使用 15W 表示如果15号是周六则14号触发，如果15号是周日则16号触发，不能跨月，也不能指定区间范围 |
| LW | 表示指定月最后一周的工作日 | 指定月最后一个星期五 |
| # | 只在星期域使用表示指定月第几周的星期几 | 在星期域使用 6#3 表示指定月第3周的星期五会触发事件 |

## 常用表达式
| 表达式 | 含义 |
| -- | -- |
| 0/2 * * * * ? | 表示每2秒执行 |
| 0 0/2 * * * ? | 表示每2分钟执行 |
| 0 0 2 1 * ? | 表示在每月的1日的凌晨2点执行 |
| 0 15 10 ? * MON-FRI | 表示周一到周五每天上午10:15执行 |
| 0 15 10 ? 6L 2002-2006 | 表示2002-2006年的每个月的最后一个星期五上午10:15执行 |
| 0 0 10,14,16 * * ? | 每天10点，14点，16点执行 |
| 0 0/30 9-17 * * ? | 朝九晚五工作时间内每半小时执行 |
| 0 0 12 ? * WED | 表示每个星期三中午12点执行 |
| 0 0 12 * * ? | 每天中午12点执行 |
| 0 15 10 ? * * | 每天上午10:15执行 |
| 0 15 10 * * ? 2005 | 2005年的每天上午10:15执行 |
| 0 * 14 * * ? | 在每天下午2点到下午2:59期间的每1分钟执行 |
| 0 0/5 14 * * ? | 在每天下午2点到下午2:55期间的每5分钟执行 |
| 0 0/5 14,18 * * ? | 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟执行 |
| 0 0-5 14 * * ? | 在每天下午2点到下午2:05期间的每1分钟执行 |
| 0 10,44 14 ? 3 WED | 每年三月的星期三的下午2:10和2:44执行 |
| 0 15 10 ? * MON-FRI | 周一至周五的上午10:15执行 |
| 0 15 10 15 * ? | 每月15日上午10:15执行 |
| 0 15 10 L * ? | 每月最后一日的上午10:15执行 |
| 0 15 10 ? * 6L | 每月的最后一个星期五上午10:15执行 |
| 0 15 10 ? * 6#3 | 每月的第三个星期五上午10:15执行 |

